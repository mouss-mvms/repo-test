#  Template Ruby build

#  This template allows you to validate your Ruby code.
#  The workflow allows running tests and code linting on the default branch.

image: ruby:2.6.6

definitions:
  services:
    postgres:
      image: postgres
      environment:
        POSTGRES_PASSWORD: 62ec456ec10405cc7691530aa392118fa0e01af0f2bbf97f188dba6689e6dc0d
        DATABASE_URL: postgres://hctwqjbrvcsgma:62ec456ec10405cc7691530aa392118fa0e01af0f2bbf97f188dba6689e6dc0d@ec2-54-228-209-117.eu-west-1.compute.amazonaws.com:5432/d1jnti2aeegab7
pipelines:
  default:
    - parallel:
        - step:
            name: Test
            script:
              - bundle install
            services:
              - postgres
        - step:
            name: Swagger
            script:
              - bundle install
              - bundle exec rake rswag
            services:
              - postgres

